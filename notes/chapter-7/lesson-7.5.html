<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lesson-7.5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/images/logo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../ppa.html" rel="" target="" aria-current="page">
 <span class="menu-text">PPAs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../howto.html" rel="" target="">
 <span class="menu-text">How to</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../feedback.html" rel="" target="">
 <span class="menu-text">Feedback</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPAs</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Week-1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-1/PPA-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-7</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Week-2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-9</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-2/PPA-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-10</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Week-3</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-9</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-10</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-11</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-3/PPA-12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-12</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Week-4</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-9</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-10</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ppa/week-4/PPA-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PPA-11</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lesson-7.5" id="toc-lesson-7.5" class="nav-link active" data-scroll-target="#lesson-7.5">Lesson 7.5</a>
  <ul class="collapse">
  <li><a href="#reading-csv-files" id="toc-reading-csv-files" class="nav-link" data-scroll-target="#reading-csv-files">Reading CSV files</a>
  <ul class="collapse">
  <li><a href="#csv-files" id="toc-csv-files" class="nav-link" data-scroll-target="#csv-files">CSV files</a></li>
  <li><a href="#reading-a-csv-file" id="toc-reading-a-csv-file" class="nav-link" data-scroll-target="#reading-a-csv-file">Reading a CSV file</a></li>
  <li><a href="#files-to-collections" id="toc-files-to-collections" class="nav-link" data-scroll-target="#files-to-collections">Files to Collections</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="lesson-7.5" class="level1">
<h1>Lesson 7.5</h1>
<section id="reading-csv-files" class="level2">
<h2 class="anchored" data-anchor-id="reading-csv-files">Reading CSV files</h2>
<section id="csv-files" class="level3">
<h3 class="anchored" data-anchor-id="csv-files">CSV files</h3>
<p>Now that we are familiar with reading and writing simple files, let us see how to handle slightly more complex files. CSV files<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> are quite common in data science.In a CSV file, adjacent values in each line are separated by commas. A CSV file looks like this:</p>
<pre><code>col0,col1,col2,col3
row1,item11,item12,item13
row2,item21,item22,item23
row3,item31,item32,item33
row4,item41,item42,item43
row5,item51,item52,item53</code></pre>
<p>Such files are a good choice for representing tabular data. For the rest of this lesson, we will assume that CSV files are used to represent some such tabular data. The first line in the file is called the header. The header gives information about the fields or columns in the data. The rest of the lines can be treated as rows in the data. If this file is represented as a table, it would look like this:</p>
<div class="center" data-markdown="">
<p>&nbsp;&nbsp;col0 | col1 | col2 | col3 |</p>
<p>|: ——– |: —— :|: —— :|: —— :| | <strong>row1</strong> | item11 | item12 | item13 | | <strong>row2</strong> | item21 | item22 | item23 | | <strong>row3</strong> | item31 | item32 | item33 | | <strong>row4</strong> | item41 | item42 | item43 | | <strong>row5</strong> | item51 | item52 | item53 |</p>
</div>
</section>
<section id="reading-a-csv-file" class="level3">
<h3 class="anchored" data-anchor-id="reading-a-csv-file">Reading a CSV file</h3>
<p>Let us create a CSV file in Replit and name it <code>table.csv</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/images/img-55.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Contents of table.csv</figcaption>
</figure>
</div>
<p>Opening and reading a CSV file is no different from opening a text file. Let us try to print the lines in the file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'table.csv'</span>, <span class="st">'r'</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="bu">print</span>(line.strip())</span>
<span id="cb2-4"><a href="#cb2-4"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is the output we get:</p>
<pre><code>Name,Physics,Mathematics,Chemistry
Newton,100,98,90
Einstein,100,85,88
Ramanujan,70,100,70
Gauss,100,100,70</code></pre>
<p>So far so good. Now that we are able to extract the lines from the file, let us start asking some questions.</p>
<p>!!! question ” ” Print the chemistry marks scored by the students, one in each line.</p>
<p>This requires us to extract the last column from the file. How do we do this? Consider any one line in the file, say the second one:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># The `\n` at the end will be present for all lines except the last one</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>line <span class="op">=</span> <span class="st">'Newton,100,98,90</span><span class="ch">\n</span><span class="st">'</span>     </span>
<span id="cb4-3"><a href="#cb4-3"></a>line <span class="op">=</span> line.strip() <span class="co"># removes the \n character</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a string that corresponds to one row in the file. If we need to separate it into different columns, we need to use the <code>#!py split()</code> method and split the line based on a comma:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>line <span class="op">=</span> <span class="st">'Newton,100,98,90</span><span class="ch">\n</span><span class="st">'</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>line <span class="op">=</span> line.strip()</span>
<span id="cb5-3"><a href="#cb5-3"></a>columns <span class="op">=</span> line.split(<span class="st">','</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="bu">print</span>(columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This returns a list of strings:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>[<span class="st">'Newton'</span>, <span class="st">'100'</span>, <span class="st">'98'</span>, <span class="st">'90'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To extract the last column, we just need to take the last element from this list and convert it into an integer:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>line <span class="op">=</span> <span class="st">'Newton,100,98,90'</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>line <span class="op">=</span> line.strip()</span>
<span id="cb7-3"><a href="#cb7-3"></a>columns <span class="op">=</span> line.split(<span class="st">','</span>)</span>
<span id="cb7-4"><a href="#cb7-4"></a>chem_marks <span class="op">=</span> <span class="bu">int</span>(columns[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="bu">print</span>(chem_marks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>That is all! We have done this for one row. We need to do this for all the rows. Enter loop:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'table.csv'</span>, <span class="st">'r'</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb8-3"><a href="#cb8-3"></a>    line <span class="op">=</span> line.strip()</span>
<span id="cb8-4"><a href="#cb8-4"></a>    columns <span class="op">=</span> line.split(<span class="st">','</span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a>    chem_marks <span class="op">=</span> <span class="bu">int</span>(columns[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="bu">print</span>(chem_marks)</span>
<span id="cb8-7"><a href="#cb8-7"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aha, but we get an error:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource pycon number-lines code-with-copy"><code class="sourceCode"><span id="cb9-1"><a href="#cb9-1"></a>Traceback (most recent call last):</span>
<span id="cb9-2"><a href="#cb9-2"></a>  File "main.py", line 5, in &lt;module&gt;</span>
<span id="cb9-3"><a href="#cb9-3"></a>    chem_marks = int(columns[-1])</span>
<span id="cb9-4"><a href="#cb9-4"></a>ValueError: invalid literal for int() with base 10: 'Chemistry'</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Can you see why? We have tried to convert the last column of the header into an integer as well. The moral of the story is that when we are reading CSV files, we need to find a way to deal with the header. Let us modify our code towards that end:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'table.csv'</span>, <span class="st">'r'</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a>header <span class="op">=</span> f.readline()       </span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co"># The file object has finished reading the first line</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co"># It is now ready to read from the second line onwards</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb10-6"><a href="#cb10-6"></a>    line <span class="op">=</span> line.strip()</span>
<span id="cb10-7"><a href="#cb10-7"></a>    columns <span class="op">=</span> line.split(<span class="st">','</span>)</span>
<span id="cb10-8"><a href="#cb10-8"></a>    chem_marks <span class="op">=</span> <span class="bu">int</span>(columns[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb10-9"><a href="#cb10-9"></a>    <span class="bu">print</span>(chem_marks)</span>
<span id="cb10-10"><a href="#cb10-10"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This works! In the second line, we read the header. Now, when the for loop starts in line 5, we are ready to read from the second line in the file. Consider the following approach that uses the <code>#!py readlines()</code> method alone:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'table.csv'</span>, <span class="st">'r'</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a>lines <span class="op">=</span> f.readlines()</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># lines[1: ] is the rest of the list </span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co"># after ignoring the header</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="cf">for</span> line <span class="kw">in</span> lines[<span class="dv">1</span>: ]:         </span>
<span id="cb11-6"><a href="#cb11-6"></a>    line <span class="op">=</span> line.strip()             <span class="co"># strip the line of \n</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    columns <span class="op">=</span> line.split(<span class="st">','</span>)       <span class="co"># split based on comma</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>    chem_marks <span class="op">=</span> <span class="bu">int</span>(columns[<span class="op">-</span><span class="dv">1</span>])   <span class="co"># convert last column to int</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="bu">print</span>(chem_marks)               </span>
<span id="cb11-10"><a href="#cb11-10"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>#!py readlines()</code> is a reasonable choice for reading small files, say under 1000 lines. We get all the lines of the files in a list. Reading a file reduces to processing a list of strings. If <code>lines</code> is the list of lines, then <code>lines[i]</code> corresponds to the <span class="math inline">\((i + 1)^{th}\)</span> line in the file. Going the other way, the <span class="math inline">\(i^{th}\)</span> line in the file corresponds to the string <code>lines[i - 1]</code>.</p>
<p>!!! warning “Processing large files”</p>
<pre><code>When it comes to large files, `#!py readline()` is the best method to use. Processing large files is best done by reading one line at a time. Using `#!py readlines()` for large files is a dangerous idea. This is because, `#!py readlines()` dumps the entire content of the file into a list of strings. When the file is large, this list will occupy a large amount of memory. Let us try to write the same program given above using the `readline` method:

```python
f = open('table.csv', 'r')
header = f.readline().strip()       # this is for the header
line = f.readline()                 # second line; actual rows begin
while line:
    line = line.strip()             # strip the line of \n
    columns = line.split(',')       # split based on comma
    chem_marks = int(columns[-1])   # convert last column to int
    print(chem_marks)
    line = f.readline()             # read the next line in the file
f.close()
```</code></pre>
</section>
<section id="files-to-collections" class="level3">
<h3 class="anchored" data-anchor-id="files-to-collections">Files to Collections</h3>
<p>It is often useful to convert a CSV file and store in a suitable collection. We could do this in several ways. Here, let us try to create the following list of dictionaries from the file:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>data <span class="op">=</span> [</span>
<span id="cb13-2"><a href="#cb13-2"></a>{<span class="st">'Name'</span>: <span class="st">'Newton'</span>, <span class="st">'Physics'</span>: <span class="dv">100</span>, <span class="st">'Mathematics'</span>: <span class="dv">98</span>, <span class="st">'Chemistry'</span>: <span class="dv">90</span>}, </span>
<span id="cb13-3"><a href="#cb13-3"></a>{<span class="st">'Name'</span>: <span class="st">'Einstein'</span>, <span class="st">'Physics'</span>: <span class="dv">100</span>, <span class="st">'Mathematics'</span>: <span class="dv">85</span>, <span class="st">'Chemistry'</span>: <span class="dv">88</span>}, </span>
<span id="cb13-4"><a href="#cb13-4"></a>{<span class="st">'Name'</span>: <span class="st">'Ramanujan'</span>, <span class="st">'Physics'</span>: <span class="dv">70</span>, <span class="st">'Mathematics'</span>: <span class="dv">100</span>, <span class="st">'Chemistry'</span>: <span class="dv">70</span>}, </span>
<span id="cb13-5"><a href="#cb13-5"></a>{<span class="st">'Name'</span>: <span class="st">'Gauss'</span>, <span class="st">'Physics'</span>: <span class="dv">100</span>, <span class="st">'Mathematics'</span>: <span class="dv">100</span>, <span class="st">'Chemistry'</span>: <span class="dv">70</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Couple of points to note.</p>
<ul>
<li>This is a list of dictionaries. Each dictionary in the list corresponds to one row in the file.</li>
<li>The elements in the header appear as keys in every dictionary.</li>
<li>The values of the dictionary are of different data types. Names are strings, marks are integers.</li>
</ul>
<p>This is going to be a fairly long code. Let us break it down. First, some basic processing to get the list of lines from the file after stripping them of the trailing newlines:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'table.csv'</span>, <span class="st">'r'</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a>lines <span class="op">=</span> [ ]</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="cf">for</span> line <span class="kw">in</span> f.readlines():</span>
<span id="cb14-4"><a href="#cb14-4"></a>    line <span class="op">=</span> line.strip()</span>
<span id="cb14-5"><a href="#cb14-5"></a>    lines.append(line)</span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co"># Now, we have the list of lines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, let us get the details of the header:</p>
<p><code>python linenums="7" header = lines[0].split(',')    # lines[0] is the first row num_cols = len(header) # Now, we have the header information # We also know the number of columns in the file</code></p>
<p>Now, it is time to go through the remaining lines in the file:</p>
<p><code>python linenums="11" ### Block-3 ### data = [ ]                      # list to store the contents for line in lines[1: ]:         # ignore the header     cols = line.split(',')      # split the column based on comma     row_dict = dict()           # create a dict to store this particular row     for i in range(num_cols):   # go through each element (column) in this row         key = header[i]         # key will be this column's name         if key == 'Name':       # are we storing a name or a number?             value = cols[i]     # since this is a name, don't convert to int         else:                value = int(cols[i])    # since this is marks, convert to int         row_dict[key] = value       # update dict     data.append(row_dict)           # append this row to the list data f.close()</code></p>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>CSV stands for comma-seperated values. Learn more about this file type <a href="https://en.wikipedia.org/wiki/Comma-separated_values">here</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2024, Karthik Thiagarajan @ IIT Madras</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>